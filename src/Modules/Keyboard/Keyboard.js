import React, {useEffect} from 'react';
import styles from './Keyboard.module.scss';
import {Howl} from 'howler';

import A from '../../assets/sounds/keys/A.ogg';
import ASharp from '../../assets/sounds/keys/ASharp.ogg';
import B from '../../assets/sounds/keys/B.ogg';
import C from '../../assets/sounds/keys/C.ogg';
import CSharp from '../../assets/sounds/keys/CSharp.ogg';
import D from '../../assets/sounds/keys/D.ogg';
import DSharp from '../../assets/sounds/keys/DSharp.ogg';
import E from '../../assets/sounds/keys/E.ogg';
import F from '../../assets/sounds/keys/F.ogg';
import FSharp from '../../assets/sounds/keys/FSharp.ogg';
import G from '../../assets/sounds/keys/G.ogg';
import GSharp from '../../assets/sounds/keys/GSharp.ogg';

const Keyboard = () => {

  const keyCodes = [67,97,68,98,69,70,99,71,100,65,101,66]

  const sounds = {
    s67: '',
    s97: '',
    s68: '',
    s98: '',
    s69: '',
    s70: '',
    s99: '',
    s71: '',
    s100: '',
    s65: '',
    s101: '',
    s66: '',
  }

  useEffect(() => {
    const audioC = new Howl({
      src: [C]
    });
    const audioCS = new Howl({
      src: [CSharp]
    });
    const audioD = new Howl({
      src: [D]
    });
    const audioDS = new Howl({
      src: [DSharp]
    });
    const audioE = new Howl({
      src: [E]
    });
    const audioF = new Howl({
      src: [F]
    });
    const audioFS = new Howl({
      src: [FSharp]
    });
    const audioG = new Howl({
      src: [G]
    });
    const audioGS = new Howl({
      src: [GSharp]
    });
    const audioA = new Howl({
      src: [A]
    });
    const audioAS = new Howl({
      src: [ASharp]
    });
    const audioB = new Howl({
      src: [B]
    });


    document.addEventListener('keydown', (e)=> {
      playSound(e)
    })

    sounds.s67 = audioC;
    sounds.s97 = audioCS;
    sounds.s68 = audioD;
    sounds.s98 = audioDS;
    sounds.s69 = audioE;
    sounds.s70 = audioF;
    sounds.s99 = audioFS;
    sounds.s71 = audioG;
    sounds.s100 = audioGS;
    sounds.s65 = audioA;
    sounds.s101 = audioAS;
    sounds.s66 = audioB;
  })

  const playSound = (key) => {
    const mouseClickKey = parseInt(key.target.getAttribute('code'));
    const keyboardClickKey = key.keyCode;
    if(keyCodes.includes(keyboardClickKey)) {
      const currentSound = `s${keyboardClickKey}`
        sounds[currentSound].currentTime = 0;
        sounds[currentSound].play()
    } else if(keyCodes.includes(mouseClickKey)) {
      const currentSound = `s${mouseClickKey}`
        sounds[currentSound].currentTime = 0;
        sounds[currentSound].play()
    }

  }

  return(
    <div className={styles.keyboardContainer}>
    <svg width="526" height="329" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path className={styles.key} code="67" onClick={playSound} d="M56.3671 188.007h16.7553V328.5H.5V.5h55.3671v187.507h.5z" fill="white" stroke="black"/>

      <path className={styles.key} onClick={playSound} code="70" d="M281.836 188.007h17.905V328.5h-71.472V.5h53.067v187.507h.5z" fill="white" stroke="black"/>

      <path className={styles.key} onClick={playSound} code="69" d="M169.101 188.007h-16.755V328.5h72.623V.5h-55.368v187.507h-.5z" fill="white" stroke="black"/>

      <path className={styles.key} onClick={playSound} code="66" d="M469.343 188.007h-16.756V328.5h72.623V.5h-55.367v187.507h-.5z" fill="white" stroke="black"/>

      <path className={styles.key} onClick={playSound} code="68" d="M94.8287 187.507V.5H130.64v187.507h18.405V328.5H76.4231V188.007h18.4056v-.5z" fill="white" stroke="black"/>

      <path  className={styles.key} onClick={playSound} code="71" d="M320.297 187.507V.5h36.387v187.507h17.255V328.5h-70.897V188.007h17.255v-.5z" fill="white" stroke="black"/>

      <path className={styles.key} onClick={playSound} code="65" d="M395.07 187.507V.5h36.386v187.507h17.256V328.5h-70.897V188.007h17.255v-.5z" fill="white" stroke="black"/><path d="M40.2257 286.649c-.1328 1.835-.8125 3.281-2.0391 4.335-1.2187 1.055-2.8281 1.583-4.8281 1.583-2.1875 0-3.9102-.735-5.168-2.204-1.25-1.476-1.875-3.5-1.875-6.07v-1.043c0-1.641.2891-3.086.8672-4.336.5781-1.25 1.4024-2.207 2.4727-2.871 1.0781-.672 2.3281-1.008 3.75-1.008 1.9687 0 3.5547.528 4.7578 1.582 1.2031 1.055 1.8984 2.535 2.0859 4.442h-3.5156c-.0859-1.102-.3945-1.899-.9258-2.391-.5234-.5-1.3242-.75-2.4023-.75-1.1719 0-2.0508.422-2.6368 1.266-.5781.836-.875 2.136-.8906 3.902v1.289c0 1.844.2774 3.192.8321 4.043.5625.852 1.4453 1.277 2.6484 1.277 1.0859 0 1.8945-.246 2.4258-.738.539-.5.8476-1.269.9258-2.308h3.5156z" fill="black"/><path d="M105.055 292.332V275.27h5.25c1.5 0 2.84.339 4.019 1.019 1.188.672 2.114 1.633 2.778 2.883.664 1.242.996 2.656.996 4.242v.785c0 1.586-.328 2.996-.985 4.231-.648 1.234-1.566 2.191-2.753 2.871-1.188.68-2.528 1.023-4.02 1.031h-5.285zm3.516-14.215v11.391h1.699c1.375 0 2.426-.449 3.152-1.348.727-.898 1.098-2.183 1.113-3.855v-.903c0-1.734-.359-3.046-1.078-3.937-.719-.898-1.769-1.348-3.152-1.348h-1.734z" fill="black"/><path d="M192.394 284.938h-6.75v4.57h7.922v2.824h-11.438V275.27h11.414v2.847h-7.898v4.067h6.75v2.754z" fill="black"/><path d="M266.016 285.359h-6.75v6.973h-3.515V275.27h11.109v2.847h-7.594v4.407h6.75v2.835z" fill="black"/><path d="M345.174 290.176c-.633.758-1.528 1.348-2.684 1.769-1.156.414-2.437.622-3.844.622-1.476 0-2.773-.321-3.89-.961-1.11-.649-1.969-1.586-2.578-2.813-.602-1.226-.91-2.668-.926-4.324v-1.16c0-1.703.285-3.176.855-4.418.579-1.25 1.407-2.203 2.485-2.86 1.086-.664 2.355-.996 3.808-.996 2.024 0 3.606.485 4.746 1.453 1.141.961 1.817 2.364 2.028 4.207h-3.422c-.156-.976-.504-1.691-1.043-2.144-.531-.453-1.266-.68-2.203-.68-1.195 0-2.106.449-2.731 1.348-.625.898-.941 2.234-.949 4.008v1.09c0 1.789.34 3.14 1.02 4.054.679.914 1.675 1.371 2.988 1.371 1.32 0 2.262-.281 2.824-.843v-2.942h-3.199v-2.59h6.715v6.809z" fill="black"/><path d="M413.779 288.817h-6.164l-1.172 3.515h-3.739l6.352-17.062h3.258l6.387 17.062h-3.739l-1.183-3.515zm-5.215-2.848h4.265l-2.144-6.387-2.121 6.387z" fill="black"/><path d="M482.37 292.332V275.27h5.976c2.07 0 3.641.398 4.711 1.195 1.07.789 1.606 1.949 1.606 3.48 0 .836-.215 1.575-.645 2.215-.43.633-1.027 1.098-1.793 1.395.875.219 1.563.66 2.063 1.324.507.664.761 1.477.761 2.438 0 1.64-.523 2.882-1.57 3.726-1.047.844-2.539 1.274-4.477 1.289h-6.632zm3.515-7.43v4.606h3.012c.828 0 1.473-.195 1.934-.586.468-.398.703-.945.703-1.641 0-1.562-.809-2.355-2.426-2.379h-3.223zm0-2.484h2.602c1.773-.031 2.66-.738 2.66-2.121 0-.773-.227-1.328-.68-1.664-.445-.344-1.152-.516-2.121-.516h-2.461v4.301z" fill="black"/>

      <path className={[styles.key, styles.keyBlack].join(' ')} onClick={playSound} code="97" d="M94.3287 0H56.3671v187.507h37.9616V0z" fill="black"/>

      <path className={[styles.key, styles.keyBlack].join(' ')} onClick={playSound} code="98" d="M169.101 0H131.14v187.507h37.961V0z" fill="black"/>

      <path className={[styles.key, styles.keyBlack].join(' ')} onClick={playSound} code="99" d="M319.797 0h-37.961v187.507h37.961V0z" fill="black"/>

      <path className={[styles.key, styles.keyBlack].join(' ')} onClick={playSound} code="100" d="M394.57 0h-37.962v187.507h37.962V0z" fill="black"/>

      <path className={[styles.key, styles.keyBlack].join(' ')} onClick={playSound} code="101" d="M470.493 0h-38.537v187.507h38.537V0z" fill="black"/><path d="M78.2238 94.3287v8.7843m0 0v5.02c3.4029-1.255 9.3336-4.016 5.8335-5.02-3.5001-1.004-5.3474-.418-5.8335 0z" stroke="white"/><path d="M72.157 156.531c-.0996 1.377-.6094 2.461-1.5293 3.252-.914.791-2.1211 1.186-3.6211 1.186-1.6406 0-2.9326-.55-3.876-1.652-.9375-1.107-1.4062-2.625-1.4062-4.553v-.782c0-1.23.2168-2.314.6504-3.252.4336-.937 1.0517-1.655 1.8545-2.153.8086-.504 1.7461-.756 2.8125-.756 1.4765 0 2.666.396 3.5683 1.187.9024.791 1.4239 1.901 1.5645 3.331h-2.6367c-.0645-.827-.2959-1.424-.6944-1.793-.3925-.375-.9931-.563-1.8017-.563-.8789 0-1.5381.317-1.9776.949-.4336.627-.6562 1.603-.6679 2.927v.967c0 1.383.208 2.393.624 3.032.4219.639 1.084.958 1.9863.958.8145 0 1.4209-.184 1.8194-.554.4043-.375.6357-.952.6943-1.731h2.6367zm6.4512.659h-1.6963l-.6328 3.604h-1.6084l.6328-3.604h-1.9951v-1.512h2.2588l.4394-2.496h-2.039v-1.529h2.3115l.6416-3.656h1.5996l-.6416 3.656h1.7051l.6416-3.656h1.6084l-.6416 3.656h1.9248v1.529h-2.1973l-.4394 2.496h1.9687v1.512h-2.2324l-.6328 3.604h-1.6084l.6328-3.604zm-1.4326-1.512h1.6963l.4394-2.496h-1.7051l-.4306 2.496z" fill="white"/><path d="M139.185 160.794v-12.797h3.937c1.125 0 2.13.255 3.015.764.89.504 1.585 1.225 2.083 2.163.498.931.747 1.992.747 3.181v.589c0 1.19-.246 2.247-.739 3.173-.486.926-1.174 1.643-2.065 2.153s-1.895.768-3.015.774h-3.963zm2.636-10.661v8.543h1.275c1.031 0 1.819-.337 2.364-1.011.545-.674.823-1.638.835-2.892v-.677c0-1.3-.27-2.285-.809-2.953-.539-.674-1.327-1.01-2.364-1.01h-1.301zm13.79 7.057h-1.696l-.633 3.604h-1.608l.633-3.604h-1.996v-1.512h2.259l.44-2.496h-2.039v-1.529h2.311l.642-3.656h1.599l-.641 3.656h1.705l.641-3.656h1.609l-.642 3.656h1.925v1.529h-2.197l-.44 2.496h1.969v1.512h-2.232l-.633 3.604h-1.609l.633-3.604zm-1.432-1.512h1.696l.439-2.496h-1.705l-.43 2.496z" fill="white"/><path d="M297.58 160.166h-5.063v5.229h-2.637v-12.797h8.332v2.136h-5.695v3.305h5.063v2.127zm6.881 1.626h-1.696l-.633 3.603h-1.608l.633-3.603h-1.995v-1.512h2.258l.44-2.496h-2.039v-1.53h2.311l.642-3.656h1.6l-.642 3.656h1.705l.642-3.656h1.608l-.642 3.656h1.925v1.53h-2.197l-.44 2.496h1.969v1.512h-2.232l-.633 3.603h-1.608l.632-3.603zm-1.432-1.512h1.696l.44-2.496h-1.706l-.43 2.496z" fill="white"/><path d="M373.628 163.778c-.475.568-1.146 1.011-2.013 1.327-.867.311-1.828.466-2.883.466-1.107 0-2.08-.24-2.918-.721-.832-.486-1.476-1.189-1.933-2.109-.452-.92-.683-2.001-.695-3.243v-.87c0-1.278.214-2.382.642-3.314.434-.937 1.055-1.652 1.863-2.144.815-.499 1.767-.748 2.857-.748 1.517 0 2.704.364 3.559 1.09.856.721 1.363 1.773 1.521 3.156h-2.567c-.117-.733-.378-1.269-.782-1.609-.398-.34-.949-.51-1.652-.51-.897 0-1.579.337-2.048 1.011-.469.674-.706 1.676-.712 3.006v.817c0 1.342.255 2.356.765 3.041.509.686 1.256 1.029 2.241 1.029.99 0 1.696-.211 2.118-.633v-2.206h-2.399v-1.943h5.036v5.107zm6.864-1.986h-1.696l-.633 3.603h-1.609l.633-3.603h-1.995v-1.512h2.259l.439-2.496h-2.039v-1.53h2.312l.641-3.656h1.6l-.642 3.656h1.706l.641-3.656h1.609l-.642 3.656h1.925v1.53h-2.198l-.439 2.496h1.969v1.512H382.1l-.632 3.603h-1.609l.633-3.603zm-1.433-1.512h1.697l.439-2.496h-1.705l-.431 2.496z" fill="white"/><path d="M447.801 162.758h-4.623l-.879 2.637h-2.804l4.764-12.797h2.443l4.79 12.797h-2.804l-.887-2.637zm-3.911-2.135h3.199l-1.609-4.79-1.59 4.79zm13.517 1.169h-1.696l-.633 3.603h-1.608l.633-3.603h-1.996v-1.512h2.259l.44-2.496h-2.039v-1.53h2.311l.642-3.656h1.599l-.641 3.656h1.705l.641-3.656h1.609l-.642 3.656h1.925v1.53h-2.197l-.44 2.496h1.969v1.512h-2.232l-.633 3.603h-1.609l.633-3.603zm-1.432-1.512h1.696l.439-2.496h-1.705l-.43 2.496z" fill="white"/><path d="M64.4118 111.329V98.5318h3.9375c1.125 0 2.1299.2549 3.0147.7646.8906.5039 1.5849 1.2246 2.083 2.1626.498.931.747 1.992.747 3.181v.589c0 1.19-.246 2.247-.7382 3.173-.4864.926-1.1748 1.643-2.0655 2.153-.8906.51-1.8955.768-3.0146.774h-3.9639zm2.6367-10.661v8.543h1.2745c1.0312 0 1.8193-.337 2.3642-1.011.5449-.674.8233-1.638.835-2.892v-.677c0-1.3-.2696-2.285-.8086-2.953-.5391-.674-1.3272-1.01-2.3643-1.01h-1.3008z" fill="white"/><path d="M152.996 96.6294v8.7846m0 0v5.02c3.403-1.255 9.334-4.016 5.834-5.02-3.5-1.004-5.347-.418-5.834 0z" stroke="white"/><path d="M146.884 108.083h-5.063v3.428h5.942v2.118h-8.578v-12.797h8.56v2.136h-5.924v3.05h5.063v2.065z" fill="white"/><path d="M304.843 96.6294v8.7846m0 0v5.02c3.403-1.255 9.333-4.016 5.833-5.02-3.5-1.004-5.347-.418-5.833 0z" stroke="white"/><path d="M301.156 112.012c-.475.569-1.146 1.011-2.013 1.327-.867.311-1.828.466-2.883.466-1.107 0-2.08-.24-2.918-.721-.832-.486-1.476-1.189-1.933-2.109-.452-.92-.683-2.001-.695-3.243v-.87c0-1.278.214-2.382.642-3.314.433-.937 1.055-1.652 1.863-2.144.815-.498 1.767-.747 2.857-.747 1.517 0 2.704.363 3.559 1.09.856.72 1.362 1.772 1.521 3.155h-2.567c-.117-.733-.378-1.269-.782-1.609-.398-.339-.949-.509-1.652-.509-.897 0-1.579.337-2.048 1.01-.469.674-.706 1.676-.712 3.006v.818c0 1.341.255 2.355.765 3.041.509.685 1.256 1.028 2.241 1.028.99 0 1.696-.211 2.118-.633v-2.206h-2.399v-1.942h5.036v5.106z" fill="white"/><path d="M379.615 96.6294v8.7846m0 0v5.02c3.403-1.255 9.334-4.016 5.834-5.02-3.5-1.004-5.347-.418-5.834 0z" stroke="white"/><path d="M373.028 110.993h-4.623l-.879 2.636h-2.804l4.764-12.797h2.443l4.79 12.797h-2.803l-.888-2.636zm-3.911-2.136h3.199l-1.608-4.79-1.591 4.79z" fill="white"/><path d="M455.538 96.6294v8.7846m0 0v5.02c3.403-1.255 9.334-4.016 5.834-5.02-3.5-1.004-5.347-.418-5.834 0z" stroke="white"/><path d="M441.727 113.629v-12.797h4.482c1.553 0 2.73.299 3.533.897.803.592 1.204 1.462 1.204 2.61 0 .627-.161 1.181-.483 1.661-.322.475-.771.824-1.345 1.046.656.164 1.172.495 1.547.994.381.498.571 1.107.571 1.828 0 1.23-.392 2.162-1.177 2.795-.786.632-1.905.955-3.358.966h-4.974zm2.636-5.572v3.454h2.259c.621 0 1.105-.146 1.45-.439.352-.299.528-.709.528-1.231 0-1.172-.607-1.766-1.82-1.784h-2.417zm0-1.863h1.951c1.33-.024 1.996-.554 1.996-1.591 0-.58-.17-.996-.51-1.248-.334-.258-.865-.387-1.591-.387h-1.846v3.226z" fill="white"/></svg>
      </div>
  )
}


export default Keyboard;